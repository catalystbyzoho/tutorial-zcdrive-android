{{- $redirectURL := "" }}
{{ with .Params.redirect}}
  {{ if or (hasPrefix . "http:") (hasPrefix . "https:") }}
    {{ $redirectURL = . }}
  {{ else }}
    {{ $redirectURL = ref $ .}}
  {{ end }}
{{ end }}
<!DOCTYPE html>
<html>
  <head>
    <title>{{ block "title" . }}{{ end }}</title>
    {{ partial "html-head-link.html" . }}
    {{if ne $redirectURL "" }}
      <meta http-equiv="refresh" content="0;{{ $redirectURL }}">
    {{end}}
  </head>
  <body data-url="{{ .RelPermalink }}" type="{{.Type}}" style="overflow-x: hidden;">
    {{ partial "global-search.html" . }}
    <article>
      <aside class="hide-sidebar" id="responsiveSidebar">
        {{ partial "body-sidebar.html" . }}     
        <ul class="menu" style="margin-top: 105px;">
          {{ partial "api-menu.html" . }}
        </ul> 
      </aside>
      <section class="page">
      <header>
          {{ partial "body-header.html" . }}
      </header>
      {{ block "main" . }}{{ end }}
      </section>
    </article>
    {{ partial "scroll-top.html" . }}
    <footer>
      {{ partial "body-footer.html" . }}
    </footer>
    {{ partial "html-body-link.html" . }}
  </body>
  <script>
    document.addEventListener("scroll", function(){
      var a = document.querySelector("aside").getBoundingClientRect().height;
      var b = document.getElementById("footerBlock").getBoundingClientRect().top;
      var c;
      if(b < a){
          c = (a-b)+ 130;
          document.querySelector("ul.menu").style=`margin-top: 105px; height: calc(100vh - ${c}px);`;
      }
      else{
        document.querySelector("ul.menu").style=`margin-top: 105px; height: calc(100vh - 130px);`;
      }
    });
  </script>
</html>